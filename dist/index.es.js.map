{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst useLocalStorage = (key, initialValue, useRawValues, subscribe) => {\n  const [ value, setValue ] = useState(() => {\n    try {\n      const localStorageValue = localStorage.getItem(key);\n      if (typeof localStorageValue !== 'string') {\n        localStorage.setItem(\n          key,\n          useRawValues ? String(initialValue) : JSON.stringify(initialValue)\n        );\n        return initialValue;\n      } else {\n        return useRawValues ? localStorageValue : JSON.parse(localStorageValue || 'null');\n      }\n    } catch(e) {\n      return initialValue;\n    }\n  });\n\n  useEffect(() => {\n    try {\n      const serializedState = useRawValues ? String(value) : JSON.stringify(value);\n      localStorage.setItem(key, serializedState);\n    } catch(e) {}\n  });\n\n  useEffect(() => {\n    if (!subscribe) {\n      return;\n    }\n\n    function handleStorageEvent(event) {\n      if (event.key !== key) {\n        return;\n      }\n\n      setValue(useRawValues ? event.newValue : JSON.parse(event.newValue || 'null'));\n    }\n\n    window.addEventListener('storage', handleStorageEvent);\n\n    return () => {\n      window.removeEventListener('storage', handleStorageEvent);\n    };\n  })\n\n  return [ value, setValue ];\n};\n\nexport default useLocalStorage;\n"],"names":["useLocalStorage","key","initialValue","useRawValues","subscribe","useState","localStorageValue","localStorage","getItem","setItem","String","JSON","stringify","parse","e","value","setValue","serializedState","handleStorageEvent","event","newValue","addEventListener","removeEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,kBAAkB,SAAlBA,eAAkB,CAACC,GAAD,EAAMC,YAAN,EAAoBC,YAApB,EAAkCC,SAAlC,EAAgD;kBAC1CC,SAAS,YAAM;QACrC;UACIC,oBAAoBC,aAAaC,OAAb,CAAqBP,GAArB,CAA1B;UACI,OAAOK,iBAAP,KAA6B,QAAjC,EAA2C;qBAC5BG,OAAb,CACER,GADF,EAEEE,eAAeO,OAAOR,YAAP,CAAf,GAAsCS,KAAKC,SAAL,CAAeV,YAAf,CAFxC;eAIOA,YAAP;OALF,MAMO;eACEC,eAAeG,iBAAf,GAAmCK,KAAKE,KAAL,CAAWP,qBAAqB,MAAhC,CAA1C;;KATJ,CAWE,OAAMQ,CAAN,EAAS;aACFZ,YAAP;;GAbwB,CAD0C;;MAC9Da,KAD8D;MACvDC,QADuD;;YAkB5D,YAAM;QACV;UACIC,kBAAkBd,eAAeO,OAAOK,KAAP,CAAf,GAA+BJ,KAAKC,SAAL,CAAeG,KAAf,CAAvD;mBACaN,OAAb,CAAqBR,GAArB,EAA0BgB,eAA1B;KAFF,CAGE,OAAMH,CAAN,EAAS;GAJb;;YAOU,YAAM;QACV,CAACV,SAAL,EAAgB;;;;aAIPc,kBAAT,CAA4BC,KAA5B,EAAmC;UAC7BA,MAAMlB,GAAN,KAAcA,GAAlB,EAAuB;;;;eAIdE,eAAegB,MAAMC,QAArB,GAAgCT,KAAKE,KAAL,CAAWM,MAAMC,QAAN,IAAkB,MAA7B,CAAzC;;;WAGKC,gBAAP,CAAwB,SAAxB,EAAmCH,kBAAnC;;WAEO,YAAM;aACJI,mBAAP,CAA2B,SAA3B,EAAsCJ,kBAAtC;KADF;GAfF;;SAoBO,CAAEH,KAAF,EAASC,QAAT,CAAP;CA7CF;;;;"}